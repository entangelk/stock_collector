"""
í•œêµ­ ì£¼ì‹ ì‹œì¥ íŠ¹í™” ì‹œì¥ ê°œê´€ í”„ë¡¬í”„íŠ¸
"""
from typing import Dict, Any, List
from datetime import datetime


def create_market_overview_prompt(
    multi_result: Dict[str, Any],
    ticker_list: List[str],
    analysis_focus: str = "market_overview"
) -> str:
    """
    í•œêµ­ ì£¼ì‹ ì‹œì¥ íŠ¹í™” ì‹œì¥ ê°œê´€ í”„ë¡¬í”„íŠ¸ ìƒì„±

    Args:
        multi_result: ë‹¤ì¤‘ ì „ëµ ë¶„ì„ ê²°ê³¼
        ticker_list: ë¶„ì„ ëŒ€ìƒ ì¢…ëª© ë¦¬ìŠ¤íŠ¸
        analysis_focus: ë¶„ì„ ì´ˆì  (market_overview, sector_analysis, market_timing)

    Returns:
        í•œêµ­ ì‹œì¥ íŠ¹í™” ì‹œì¥ ê°œê´€ í”„ë¡¬í”„íŠ¸
    """
    current_time = datetime.now()
    market_status = "ì¥ì¤‘" if 9 <= current_time.hour <= 15 else "ì¥í›„"

    strategies_analyzed = multi_result.get('strategies_analyzed', 0)
    successful_strategies = multi_result.get('successful_strategies', 0)
    total_matches = multi_result.get('total_matches_found', 0)

    prompt = f"""ë‹¹ì‹ ì€ í•œêµ­ ì£¼ì‹ ì‹œì¥ì„ 20ë…„ ì´ìƒ ë¶„ì„í•´ì˜¨ ìˆ˜ì„ ì‹œì¥ ì• ë„ë¦¬ìŠ¤íŠ¸ì…ë‹ˆë‹¤.
KOSPIì™€ KOSDAQì˜ ì—­ì‚¬ì  íŒ¨í„´, í•œêµ­ íŠ¹ìœ ì˜ ì‹œì¥ ì°¸ì—¬ì êµ¬ì¡°, ê·¸ë¦¬ê³  ê¸€ë¡œë²Œ ì‹œì¥ê³¼ì˜ ìƒê´€ê´€ê³„ë¥¼ ê¹Šì´ ì´í•´í•˜ê³  ìˆìŠµë‹ˆë‹¤.

## ğŸ›ï¸ í•œêµ­ ì‹œì¥ ê°œê´€ ë¶„ì„

### ğŸ“Š ë¶„ì„ í˜„í™©
- **ë¶„ì„ ì‹œì **: {current_time.strftime('%Yë…„ %mì›” %dì¼ %Hì‹œ %Më¶„')} KST ({market_status})
- **ë¶„ì„ ëŒ€ìƒ**: {len(ticker_list)}ê°œ ì¢…ëª©
- **ì ìš© ì „ëµ**: {strategies_analyzed}ê°œ (ì„±ê³µ: {successful_strategies}ê°œ)
- **ë°œê²¬ëœ ê¸°íšŒ**: {total_matches}ê°œ

### ğŸ¯ ë¶„ì„ ëŒ€ìƒ ì¢…ëª©
{', '.join(ticker_list)}

## ğŸ“ˆ ë‹¤ì¤‘ ì „ëµ ë¶„ì„ ê²°ê³¼:"""

    # ì „ëµë³„ ê²°ê³¼ ìƒì„¸ ë¶„ì„
    if 'results_by_strategy' in multi_result:
        for strategy_name, result in multi_result['results_by_strategy'].items():
            strategy_korean_name = _get_strategy_korean_name(strategy_name)
            matches_found = result.get('matches_found', 0)

            prompt += f"""

### ğŸ” {strategy_korean_name} ì „ëµ
- **ë§¤ì¹˜ëœ ì¢…ëª©**: {matches_found}ê°œ
- **ì‹œì¥ ì‹œì‚¬ì **: {_get_strategy_market_implication(strategy_name, matches_found)}"""

            if matches_found > 0 and 'results' in result:
                prompt += "\n- **ë°œê²¬ëœ ì¢…ëª©ë“¤**:"
                for match in result['results'][:3]:  # ìƒìœ„ 3ê°œë§Œ í‘œì‹œ
                    ticker = match.get('ticker', 'N/A')
                    signal_strength = match.get('signal_strength', 0)
                    prompt += f"\n  - {ticker} (ì‹ í˜¸ê°•ë„: {signal_strength:.3f})"

    if analysis_focus == "market_overview":
        prompt += f"""

## ğŸŒ í•œêµ­ ì‹œì¥ ì „ì²´ ë¶„ì„

### 1. í˜„ì¬ ì‹œì¥ ìƒí™© ì§„ë‹¨
ë‹¤ìŒ ê´€ì ì—ì„œ í•œêµ­ ì‹œì¥ì˜ í˜„ì¬ ìƒíƒœë¥¼ ë¶„ì„í•´ì£¼ì„¸ìš”:

#### ğŸ“Š ê¸°ìˆ ì  ì‹œì¥ ìƒíƒœ
- **KOSPI ì§€ìˆ˜ ë¶„ì„**: í˜„ì¬ ê¸°ìˆ ì  ìœ„ì¹˜ì™€ ì£¼ìš” ì§€ì§€/ì €í•­ì„ 
- **KOSDAQ ì§€ìˆ˜ ë¶„ì„**: ì¤‘ì†Œí˜•ì£¼ ì‹œì¥ì˜ ìƒëŒ€ì  ê°•ë„
- **ì‹œì¥ í­ ì§€í‘œ**: ìƒìŠ¹ì¢…ëª©/í•˜ë½ì¢…ëª© ë¹„ìœ¨ì„ í†µí•œ ì‹œì¥ ê±´ì „ì„±
- **ê±°ë˜ëŸ‰ ë¶„ì„**: í‰ê·  ê±°ë˜ëŸ‰ ëŒ€ë¹„ í˜„ì¬ ê±°ë˜ëŸ‰ ìˆ˜ì¤€

#### ğŸŒ ê¸€ë¡œë²Œ ì‹œì¥ ì—°ë™ì„±
- **ë¯¸êµ­ ì‹œì¥ ì˜í–¥**: S&P500, ë‚˜ìŠ¤ë‹¥ê³¼ì˜ ìƒê´€ê´€ê³„
- **ì¤‘êµ­ ì‹œì¥ ì˜í–¥**: ìƒí•˜ì´, ì‹¬ì²œ ì¦ì‹œê°€ í•œêµ­ ì‹œì¥ì— ë¯¸ì¹˜ëŠ” ì˜í–¥
- **í™˜ìœ¨ ìš”ì¸**: ì›/ë‹¬ëŸ¬ í™˜ìœ¨ì´ ì™¸êµ­ì¸ íˆ¬ìì‹¬ë¦¬ì— ë¯¸ì¹˜ëŠ” ì˜í–¥
- **ì›ìì¬ ê°€ê²©**: ìœ ê°€, ê¸ˆê°€ê²© ë“±ì´ ê´€ë ¨ ì„¹í„°ì— ë¯¸ì¹˜ëŠ” ì˜í–¥

### 2. ì‹œì¥ ì°¸ì—¬ì ë™í–¥ ë¶„ì„
#### ğŸ‘¥ íˆ¬ìì£¼ì²´ë³„ ë§¤ë§¤ íŒ¨í„´
- **ì™¸êµ­ì¸ íˆ¬ìì**: ìµœê·¼ ë§¤ìˆ˜/ë§¤ë„ íë¦„ê³¼ ì„ í˜¸ ì„¹í„°
- **ê¸°ê´€íˆ¬ìì**: ì—°ê¸°ê¸ˆ, ë³´í—˜ì‚¬ ë“±ì˜ í¬íŠ¸í´ë¦¬ì˜¤ ë¦¬ë°¸ëŸ°ì‹± ë™í–¥
- **ê°œì¸íˆ¬ìì**: ê°œë¯¸ íˆ¬ììë“¤ì˜ ì‹œì¥ ì°¸ì—¬ë„ì™€ ë§¤ë§¤ íŒ¨í„´
- **í”„ë¡œê·¸ë¨ ë§¤ë§¤**: ì°¨ìµê±°ë˜, ë°”ìŠ¤ì¼“ ê±°ë˜ì˜ ì‹œì¥ ì˜í–¥

### 3. ì„¹í„°ë³„ ìê¸ˆ íë¦„
í˜„ì¬ ë°œê²¬ëœ íˆ¬ì ê¸°íšŒë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ì„¹í„°ë³„ ìê¸ˆ íë¦„ì„ ë¶„ì„í•´ì£¼ì„¸ìš”:
- **ê°•ì„¸ ì„¹í„°**: ë‹¤ì¤‘ ì „ëµì—ì„œ ë§ì€ ì¢…ëª©ì´ ë°œê²¬ëœ ì—…ì¢…
- **ì•½ì„¸ ì„¹í„°**: ìƒëŒ€ì ìœ¼ë¡œ íˆ¬ì ê¸°íšŒê°€ ë¶€ì¡±í•œ ì—…ì¢…
- **ë¡œí…Œì´ì…˜ íŒ¨í„´**: ì„¹í„° ê°„ ìê¸ˆ ì´ë™ í˜„í™©

### 4. ì‹œì¥ ë¦¬ìŠ¤í¬ ìš”ì¸
#### âš ï¸ ë‹¨ê¸° ë¦¬ìŠ¤í¬ (1-2ì£¼)
- **ì •ì±… ë°œí‘œ**: ì •ë¶€ ì •ì±…ì´ë‚˜ ê¸ˆìœµìœ„ì›íšŒ ë°œí‘œ ì˜ˆì •
- **ì‹¤ì  ë°œí‘œ**: ì£¼ìš” ê¸°ì—…ë“¤ì˜ ë¶„ê¸° ì‹¤ì  ë°œí‘œ ì¼ì •
- **í•´ì™¸ ì´ë²¤íŠ¸**: ë¯¸êµ­ FOMC, ì¤‘êµ­ ì •ì±… ë°œí‘œ ë“±

#### âš ï¸ ì¤‘ê¸° ë¦¬ìŠ¤í¬ (1-3ê°œì›”)
- **ê²½ì œ ì§€í‘œ**: GDP, ë¬¼ê°€, ê³ ìš©ë¥  ë“± ì£¼ìš” ê²½ì œ ì§€í‘œ
- **ê¸ˆë¦¬ ì •ì±…**: í•œêµ­ì€í–‰ ê¸°ì¤€ê¸ˆë¦¬ ë³€ë™ ê°€ëŠ¥ì„±
- **í™˜ìœ¨ ë³€ë™**: ì›í™” ê°•ì„¸/ì•½ì„¸ê°€ ìˆ˜ì¶œê¸°ì—…ì— ë¯¸ì¹˜ëŠ” ì˜í–¥

### 5. íˆ¬ì ì „ëµ ì œì•ˆ
#### ğŸ¯ ë‹¨ê¸° íˆ¬ì ì „ëµ (1-4ì£¼)
- **ê´€ì‹¬ ì„¹í„°**: í˜„ì¬ ê¸°ìˆ ì  ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ì—…ì¢… ì§‘ì¤‘
- **í¬ì§€ì…˜ í¬ê¸°**: ì‹œì¥ ë³€ë™ì„±ì„ ê³ ë ¤í•œ ì ì • íˆ¬ì ë¹„ì¤‘
- **ë¦¬ìŠ¤í¬ ê´€ë¦¬**: ë‹¨ê¸° ë³€ë™ì„±ì— ëŒ€í•œ ëŒ€ì‘ ë°©ì•ˆ

#### ğŸ¯ ì¤‘ê¸° íˆ¬ì ì „ëµ (1-6ê°œì›”)
- **í•µì‹¬ í…Œë§ˆ**: í•œêµ­ ê²½ì œì˜ êµ¬ì¡°ì  ë³€í™”ë¥¼ ë°˜ì˜í•œ íˆ¬ì í…Œë§ˆ
- **í¬íŠ¸í´ë¦¬ì˜¤ êµ¬ì„±**: ëŒ€í˜•ì£¼/ì¤‘ì†Œí˜•ì£¼, ì„±ì¥ì£¼/ê°€ì¹˜ì£¼ ê· í˜•
- **ë¦¬ë°¸ëŸ°ì‹±**: ì‹œì¥ ìƒí™© ë³€í™”ì— ë”°ë¥¸ í¬íŠ¸í´ë¦¬ì˜¤ ì¡°ì • ì‹œì 

**ëª¨ë“  ë¶„ì„ì€ í•œêµ­ ì‹œì¥ì˜ ê³ ìœ í•œ íŠ¹ì„±ì„ ë°˜ì˜í•˜ì—¬ ì‹¤ìš©ì ì´ê³  êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.**"""

    elif analysis_focus == "sector_analysis":
        prompt += f"""

## ğŸ­ ì„¹í„°ë³„ ì‹¬ì¸µ ë¶„ì„

### 1. ì—…ì¢…ë³„ íˆ¬ì ê¸°íšŒ ë¶„í¬
í˜„ì¬ ë‹¤ì¤‘ ì „ëµ ë¶„ì„ì—ì„œ ë°œê²¬ëœ ì¢…ëª©ë“¤ì˜ ì—…ì¢…ë³„ ë¶„í¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ:

#### ğŸ“Š ê°•ì„¸ ì—…ì¢… ë¶„ì„
ë‹¤ì¤‘ ì „ëµì—ì„œ ë§ì€ ë§¤ì¹˜ê°€ ë°œê²¬ëœ ì—…ì¢…ë“¤ì— ëŒ€í•´:
- **ì—…ì¢…ë³„ íŠ¹ì§•**: í•´ë‹¹ ì—…ì¢…ì˜ í˜„ì¬ ê¸°ìˆ ì /í€ë”ë©˜í„¸ ìƒíƒœ
- **ì„±ì¥ ë™ë ¥**: ì—…ì¢… ì„±ì¥ì„ ì´ë„ëŠ” ì£¼ìš” ìš”ì¸ë“¤
- **íˆ¬ì í¬ì¸íŠ¸**: í•´ë‹¹ ì—…ì¢… íˆ¬ì ì‹œ í•µì‹¬ ê³ ë ¤ì‚¬í•­

#### ğŸ“‰ ì•½ì„¸ ì—…ì¢… ë¶„ì„
ìƒëŒ€ì ìœ¼ë¡œ íˆ¬ì ê¸°íšŒê°€ ì ì€ ì—…ì¢…ë“¤ì— ëŒ€í•´:
- **ì•½ì„¸ ì›ì¸**: ê¸°ìˆ ì /í€ë”ë©˜í„¸ ì•½ì„¸ ìš”ì¸ ë¶„ì„
- **ë°˜ë“± ê°€ëŠ¥ì„±**: í–¥í›„ ë°˜ë“± ì‹œë‚˜ë¦¬ì˜¤ì™€ ì¡°ê±´
- **íšŒí”¼ ê¶Œê³ **: í˜„ì¬ íˆ¬ìë¥¼ í”¼í•´ì•¼ í•  ì´ìœ 

### 2. ì„¹í„° ë¡œí…Œì´ì…˜ ì „ëµ
- **í˜„ì¬ ë‹¨ê³„**: ì‹œì¥ ì‚¬ì´í´ì—ì„œ í˜„ì¬ í•œêµ­ ì‹œì¥ì˜ ìœ„ì¹˜
- **ë‹¤ìŒ ê°•ì„¸ ì„¹í„°**: í–¥í›„ ìê¸ˆì´ ìœ ì…ë  ê°€ëŠ¥ì„±ì´ ë†’ì€ ì—…ì¢…
- **ë¡œí…Œì´ì…˜ íƒ€ì´ë°**: ì„¹í„° ê°„ ì´ë™ ì‹œì  ì˜ˆì¸¡

### 3. ì—…ì¢…ë³„ ë¦¬ìŠ¤í¬ ìš”ì¸
ê° ì£¼ìš” ì—…ì¢…ë³„ë¡œ í˜„ì¬ ì§ë©´í•œ ë¦¬ìŠ¤í¬ì™€ ê¸°íšŒ ìš”ì¸ì„ ë¶„ì„í•´ì£¼ì„¸ìš”."""

    else:  # market_timing
        prompt += f"""

## â° ì‹œì¥ íƒ€ì´ë° ë¶„ì„

### 1. í˜„ì¬ ì‹œì¥ ì‚¬ì´í´ ìœ„ì¹˜
- **í•œêµ­ ì‹œì¥ ì‚¬ì´í´**: í˜„ì¬ ê°•ì„¸/ì•½ì„¸/íš¡ë³´ êµ¬ê°„ ì¤‘ ì–´ë””ì— ìœ„ì¹˜
- **ê¸€ë¡œë²Œ ì‚¬ì´í´**: ì „ì„¸ê³„ ì£¼ì‹ì‹œì¥ ì‚¬ì´í´ê³¼ì˜ ë¹„êµ
- **ì—­ì‚¬ì  íŒ¨í„´**: ê³¼ê±° ìœ ì‚¬í•œ ì‹œì¥ ìƒí™©ê³¼ì˜ ë¹„êµ ë¶„ì„

### 2. ë‹¨ê¸° ì‹œì¥ íƒ€ì´ë° (1-4ì£¼)
#### ğŸ“ˆ ë§¤ìˆ˜ íƒ€ì´ë° ì§€í‘œ
- **ê¸°ìˆ ì  ì‹ í˜¸**: í˜„ì¬ ë°œê²¬ëœ ë‹¤ì¤‘ ì „ëµ ì‹ í˜¸ë“¤ì˜ ì‹œì¥ ì‹œì‚¬ì 
- **ì‹œì¥ ì‹¬ë¦¬**: VIX, í’‹ì½œ ë¹„ìœ¨ ë“± ê³µí¬/íƒìš• ì§€í‘œ
- **ìê¸ˆ íë¦„**: ì™¸êµ­ì¸, ê¸°ê´€ì˜ ìˆœë§¤ìˆ˜/ë§¤ë„ ì „í™˜ ì‹ í˜¸

#### â³ ëŒ€ê¸° ì‹ í˜¸
- **ì¡°ì • ê°€ëŠ¥ì„±**: ë‹¨ê¸° ì¡°ì •ì´ ì˜ˆìƒë˜ëŠ” ê¸°ìˆ ì  ì‹ í˜¸ë“¤
- **ì´ë²¤íŠ¸ ë¦¬ìŠ¤í¬**: ì˜ˆì •ëœ ì¤‘ìš” ë°œí‘œë‚˜ ì´ë²¤íŠ¸ë“¤
- **ê³¼ì—´ ì§€í‘œ**: ì‹œì¥ ê³¼ì—´ì„ ë‚˜íƒ€ë‚´ëŠ” ì‹ í˜¸ë“¤

### 3. ì¤‘ê¸° ì‹œì¥ íƒ€ì´ë° (1-6ê°œì›”)
- **ì¶”ì„¸ ì „í™˜ ì‹ í˜¸**: ì¤‘ê¸° ì¶”ì„¸ ë³€í™”ë¥¼ ì•Œë¦¬ëŠ” ì£¼ìš” ì§€í‘œë“¤
- **ê³„ì ˆì„± íŒ¨í„´**: í•œêµ­ ì‹œì¥ì˜ ì›”ë³„/ë¶„ê¸°ë³„ íŠ¹ì„± ê³ ë ¤
- **ì •ì±… ì‚¬ì´í´**: ì •ë¶€ ì •ì±… ë³€í™”ê°€ ì‹œì¥ì— ë¯¸ì¹˜ëŠ” ì¤‘ê¸°ì  ì˜í–¥

**ì‹œì¥ íƒ€ì´ë° ë¶„ì„ì€ í™•ë¥ ì  ê´€ì ì—ì„œ ì ‘ê·¼í•˜ì—¬ êµ¬ì²´ì ì¸ ì§„ì…/ì²­ì‚° ì‹œì ì„ ì œì‹œí•´ì£¼ì„¸ìš”.**"""

    prompt += f"""

## ğŸ“‹ ì¢…í•© ê²°ë¡  ë° ì‹¤í–‰ ë°©ì•ˆ

### ğŸ¯ í•µì‹¬ í¬ì¸íŠ¸ ìš”ì•½
- **ì‹œì¥ í˜„í™©**: í•œ ë¬¸ì¥ìœ¼ë¡œ í˜„ì¬ í•œêµ­ ì‹œì¥ ìƒí™© ìš”ì•½
- **ì£¼ìš” ê¸°íšŒ**: ê°€ì¥ ìœ ë§í•œ íˆ¬ì ê¸°íšŒ 3ê°€ì§€
- **í•µì‹¬ ë¦¬ìŠ¤í¬**: ë°˜ë“œì‹œ ì£¼ì˜í•´ì•¼ í•  ë¦¬ìŠ¤í¬ ìš”ì¸ 3ê°€ì§€

### ğŸ“ˆ ì‹¤í–‰ ì•¡ì…˜ í”Œëœ
1. **ì¦‰ì‹œ ì‹¤í–‰**: ì˜¤ëŠ˜/ë‚´ì¼ ë°”ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆëŠ” íˆ¬ì í–‰ë™
2. **ë‹¨ê¸° ê´€ì°°**: 1-2ì£¼ ë‚´ ëª¨ë‹ˆí„°ë§í•  ì§€í‘œë‚˜ ì¢…ëª©ë“¤
3. **ì¤‘ê¸° ì¤€ë¹„**: 1-3ê°œì›” ë‚´ ì¤€ë¹„í•´ì•¼ í•  íˆ¬ì ì „ëµ

### âš ï¸ ì£¼ì˜ì‚¬í•­
- **ì‹œì¥ ë³€ë™ì„±**: ì˜ˆìƒë˜ëŠ” ë³€ë™ì„± ìˆ˜ì¤€ê³¼ ëŒ€ì‘ ë°©ì•ˆ
- **ë¦¬ìŠ¤í¬ ê´€ë¦¬**: í¬ì§€ì…˜ í¬ê¸° ë° ì†ì ˆ ê¸°ì¤€
- **ëª¨ë‹ˆí„°ë§ í¬ì¸íŠ¸**: ì§€ì†ì ìœ¼ë¡œ ê´€ì°°í•´ì•¼ í•  ì§€í‘œë“¤

**ëª¨ë“  ë¶„ì„ì€ í•œêµ­ íˆ¬ììê°€ ì‹¤ì œë¡œ í™œìš©í•  ìˆ˜ ìˆë„ë¡ êµ¬ì²´ì ì´ê³  ì‹¤ìš©ì ìœ¼ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”.
íŠ¹íˆ í•œêµ­ ì‹œì¥ì˜ íŠ¹ìˆ˜ì„±(ê°œì¥/íì¥ ì‹œê°„, ê±°ë˜ì œë„, ì„¸ê¸ˆ ë“±)ì„ ë°˜ì˜í•˜ì—¬ í˜„ì‹¤ì ì¸ ì¡°ì–¸ì„ ì œê³µí•´ì£¼ì„¸ìš”.**"""

    return prompt


def _get_strategy_korean_name(strategy_name: str) -> str:
    """ì „ëµëª…ì„ í•œêµ­ì–´ë¡œ ë³€í™˜"""
    strategy_names = {
        'dictmacdgoldencrossstrategy': 'MACD ê³¨ë“ í¬ë¡œìŠ¤',
        'dictrsioversoldstrategy': 'RSI ê³¼ë§¤ë„ ë°˜ë“±',
        'dictbollingersqueezestrategy': 'ë³¼ë¦°ì € ë°´ë“œ ìŠ¤í€´ì¦ˆ',
        'dictmovingaveragecrossoverstrategy': 'ì´ë™í‰ê· ì„  êµì°¨'
    }
    return strategy_names.get(strategy_name, strategy_name)


def _get_strategy_market_implication(strategy_name: str, matches_found: int) -> str:
    """ì „ëµë³„ ì‹œì¥ ì‹œì‚¬ì  ë¶„ì„"""
    implications = {
        'dictmacdgoldencrossstrategy': {
            'high': 'ì‹œì¥ì— ê°•í•œ ìƒìŠ¹ ëª¨ë©˜í…€ì´ í˜•ì„±ë˜ê³  ìˆìœ¼ë©°, ê¸°ê´€íˆ¬ììë“¤ì˜ ì ê·¹ì ì¸ ë§¤ìˆ˜ì„¸ê°€ ì˜ˆìƒë©ë‹ˆë‹¤.',
            'medium': 'ì„ ë³„ì ì¸ ìƒìŠ¹ ëª¨ë©˜í…€ì´ ë‚˜íƒ€ë‚˜ê³  ìˆì–´, ì¢…ëª©ë³„ ì°¨ë³„í™”ê°€ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.',
            'low': 'ì „ë°˜ì ì¸ ìƒìŠ¹ ëª¨ë©˜í…€ì´ ë¶€ì¡±í•œ ìƒí™©ìœ¼ë¡œ, ì‹œì¥ì´ ë°©í–¥ì„±ì„ ì°¾ì§€ ëª»í•˜ê³  ìˆìŠµë‹ˆë‹¤.'
        },
        'dictrsioversoldstrategy': {
            'high': 'ê³¼ë„í•œ ë§¤ë„ ì••ë ¥ ì´í›„ ê¸°ìˆ ì  ë°˜ë“± êµ¬ê°„ì— ì§„ì…í–ˆìœ¼ë©°, ì €ê°€ ë§¤ìˆ˜ ê¸°íšŒê°€ í™•ëŒ€ë˜ê³  ìˆìŠµë‹ˆë‹¤.',
            'medium': 'ì¼ë¶€ ì¢…ëª©ì—ì„œ ê³¼ë§¤ë„ ë°˜ë“± ì‹ í˜¸ê°€ ë‚˜íƒ€ë‚˜ê³  ìˆì–´, ì„ ë³„ì  ì ‘ê·¼ì´ í•„ìš”í•©ë‹ˆë‹¤.',
            'low': 'ì‹œì¥ ì „ë°˜ì˜ ë§¤ë„ ì••ë ¥ì´ ì§€ì†ë˜ê³  ìˆì–´, ì¶”ê°€ì ì¸ ì¡°ì • ê°€ëŠ¥ì„±ì„ ì—¼ë‘ì— ë‘ì–´ì•¼ í•©ë‹ˆë‹¤.'
        },
        'dictbollingersqueezestrategy': {
            'high': 'ë³€ë™ì„± ìˆ˜ì¶• ì´í›„ ëŒ€ê·œëª¨ ë°©í–¥ì„± ëŒíŒŒê°€ ì„ë°•í–ˆìœ¼ë©°, í° ê°€ê²© ë³€ë™ì´ ì˜ˆìƒë©ë‹ˆë‹¤.',
            'medium': 'ì¼ë¶€ ì¢…ëª©ì—ì„œ ë³€ë™ì„± ëŒíŒŒ ì¤€ë¹„ê°€ ê°ì§€ë˜ê³  ìˆì–´, ëª¨ë©˜í…€ íˆ¬ì ê¸°íšŒê°€ ìˆìŠµë‹ˆë‹¤.',
            'low': 'ì‹œì¥ì´ ë°•ìŠ¤ê¶Œì—ì„œ ë²—ì–´ë‚˜ì§€ ëª»í•˜ê³  ìˆì–´, ì¶”ì„¸ íˆ¬ìë³´ë‹¤ëŠ” êµ¬ê°„ ë§¤ë§¤ê°€ ì í•©í•©ë‹ˆë‹¤.'
        },
        'dictmovingaveragecrossoverstrategy': {
            'high': 'ë‹¤ìˆ˜ ì¢…ëª©ì—ì„œ ì´í‰ì„  ì •ë°°ì—´ì´ í˜•ì„±ë˜ê³  ìˆì–´, ì‹œì¥ ì „ë°˜ì˜ ìƒìŠ¹ ì¶”ì„¸ê°€ ê°•í™”ë˜ê³  ìˆìŠµë‹ˆë‹¤.',
            'medium': 'ì„ ë³„ì ì¸ ì´í‰ì„  ê³¨ë“ í¬ë¡œìŠ¤ê°€ ë‚˜íƒ€ë‚˜ê³  ìˆì–´, ê°œë³„ ì¢…ëª©ì˜ ì¶”ì„¸ ë³€í™”ì— ì£¼ëª©í•´ì•¼ í•©ë‹ˆë‹¤.',
            'low': 'ì´í‰ì„  ë°°ì—´ì´ ë¶ˆë¶„ëª…í•œ ìƒí™©ìœ¼ë¡œ, ëª…í™•í•œ ì¶”ì„¸ê°€ í˜•ì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.'
        }
    }

    level = 'high' if matches_found >= 5 else 'medium' if matches_found >= 2 else 'low'
    return implications.get(strategy_name, {}).get(level, 'ì‹œì¥ ìƒí™©ì— ëŒ€í•œ ì¶”ê°€ ë¶„ì„ì´ í•„ìš”í•©ë‹ˆë‹¤.')