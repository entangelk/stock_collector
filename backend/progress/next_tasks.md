# 다음 작업 계획서

> **작업 재개 시 이 파일을 먼저 읽고 순서대로 진행하세요.**

## 🚀 즉시 시작할 작업

### 1단계: 기술분석 코드 통합 (최우선)
```bash
# 현재 상황
- collectors/technical_analysis.py (새로운 한국 주식 특화 코드) ✅
- collectors/technical_analyzer.py (기존 코드) ❌ 삭제 필요
- import 경로 충돌 상황
```

**작업 내용:**
1. `technical_analyzer.py` 파일 삭제
2. 모든 import 경로를 `technical_analysis.py`로 수정
3. `collectors/__init__.py` 업데이트
4. 전체 코드에서 import 경로 일관성 확보

**예상 시간:** 30분

### 2단계: 전략 모듈 업데이트
**현재 문제점:**
- 기존 전략들이 단순한 지표만 사용
- 새로운 기술분석 로직 미활용
- 한국 주식 시장 특성 미반영

**수정할 파일들:**
- `strategies/macd_golden_cross.py`
- `strategies/rsi_oversold.py`  
- `strategies/bollinger_squeeze.py`
- `strategies/moving_average_crossover.py`

**작업 내용:**
1. 새로운 기술분석 클래스 활용
2. 한국 주식 특화 매개변수 적용
3. 더 정교한 신호 판단 로직 구현

**예상 시간:** 2시간

### 3단계: AI 분석 시스템 전면 수정
**수정 대상:**
- `services/ai_service.py` - 기술분석 결과 활용 로직
- `routers/ai_analysis.py` - API 응답 개선
- 응답 모델 업데이트

**작업 내용:**
1. 새로운 기술분석 결과를 AI 입력으로 활용
2. 더 풍부한 분석 데이터 제공
3. API 응답 구조 개선

**예상 시간:** 2-3시간

### 4단계: AI 프롬프트 전면 재작성
**현재 문제:**
- 임시로 작성된 일반적인 프롬프트
- 한국 주식 시장 특성 미반영
- 새로운 기술분석 지표 미활용

**재작성할 파일들:**
- `prompts/technical_analysis_prompt.py`
- `prompts/market_overview_prompt.py`
- `prompts/trading_opportunity_prompt.py`
- `prompts/risk_assessment_prompt.py`

**작업 방향:**
1. 한국 주식 시장 특성 반영 (KOSPI/KOSDAQ, 거래시간, 시장 문화)
2. 새로운 기술분석 지표 활용
3. 실용적이고 구체적인 분석 결과 생성
4. 사용자 맞춤형 분석 제공

**예상 시간:** 2-3시간

## 🔧 보조 작업

### 5단계: 사용자 매뉴얼 작성
**작성할 문서:**
1. **초기 설정 가이드**
   - 환경 설정 (.env 파일 구성)
   - 데이터베이스 초기화
   - API 키 설정 (Gemini)

2. **수동 업데이트 가이드**
   - `manual_setup.py` 실행 방법
   - 초기 데이터 수집 테스트
   - 문제 상황 대응

3. **자동 업데이트 설정**
   - 크론잡 설정
   - 로그 모니터링
   - 오류 알림 설정

4. **API 사용법**
   - 주요 엔드포인트 설명
   - 요청/응답 예시
   - 오류 코드 설명

**파일 위치:** `docs/user_manual.md`
**예상 시간:** 2시간

### 6단계: 초기 테스트 프레임워크
**구현할 테스트:**
1. **단기 데이터 수집 테스트**
   - 1-2일치 데이터 수집
   - 기술분석 정확성 확인
   - 성능 측정

2. **API 응답 테스트**
   - 모든 엔드포인트 동작 확인
   - 응답 시간 측정
   - 오류 상황 처리 확인

3. **AI 분석 품질 테스트**
   - 프롬프트 응답 품질 확인
   - 분석 결과 일관성 검증

**파일 위치:** `tests/` 폴더
**예상 시간:** 1-2시간

## ⚡ 작업 진행 순서

### Phase 1: 핵심 기능 통합 (4-5시간)
1. 기술분석 코드 통합 ✅
2. 전략 모듈 업데이트
3. AI 분석 시스템 수정

### Phase 2: 콘텐츠 개선 (3-4시간)  
4. AI 프롬프트 재작성
5. 사용자 매뉴얼 작성

### Phase 3: 검증 및 마무리 (2-3시간)
6. 테스트 프레임워크 구현
7. 전체 시스템 연동 테스트
8. 문서 최종 업데이트

## 🎯 성공 기준
- [ ] 모든 기술분석 코드가 한국 주식 특화 로직으로 통합됨
- [ ] 전략 모듈들이 새로운 분석 로직을 정상 활용함
- [ ] AI 분석이 실용적이고 정확한 인사이트를 제공함
- [ ] 사용자가 매뉴얼만으로 시스템을 운영할 수 있음
- [ ] 초기 테스트를 통해 시스템 안정성이 검증됨

## 📋 체크리스트

### 기술적 통합
- [ ] `technical_analyzer.py` 삭제 완료
- [ ] 모든 import 경로 `technical_analysis`로 통일
- [ ] 전략 모듈들이 새로운 분석 로직 활용
- [ ] AI 서비스가 향상된 기술분석 결과 사용

### 콘텐츠 품질
- [ ] AI 프롬프트가 한국 주식 시장 특성 반영
- [ ] 분석 결과가 실용적이고 구체적
- [ ] 사용자 매뉴얼이 완전하고 이해하기 쉬움

### 시스템 안정성  
- [ ] 초기 테스트 통과
- [ ] API 모든 엔드포인트 정상 동작
- [ ] 오류 상황 적절히 처리
- [ ] 로그 및 모니터링 체계 구축

## 🚨 주의사항
1. **각 단계별 테스트 필수** - 다음 단계 진행 전 현재 단계 완전 검증
2. **기존 데이터 호환성 유지** - 스키마 변경 시 마이그레이션 고려
3. **한국 주식 시장 특성 우선 반영** - 모든 로직에서 한국 시장 특성 고려
4. **사용자 관점 우선** - 복잡한 기능보다는 사용하기 쉬운 시스템 구축

---
**다음 작업 재개 시 이 파일의 1단계부터 순서대로 시작하세요.**